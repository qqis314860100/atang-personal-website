# Next.js é…ç½®ä¼˜åŒ–

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  // Vercelä¼˜åŒ–é…ç½®
  experimental: {
    serverComponentsExternalPackages: ['@supabase/supabase-js'],
  },

  // å›¾ç‰‡ä¼˜åŒ–
  images: {
    domains: ['your-domain.com', 'supabase.co'],
    formats: ['image/webp', 'image/avif'],
  },

  // é‡å®šå‘é…ç½®
  async redirects() {
    return [
      {
        source: '/home',
        destination: '/',
        permanent: true,
      },
    ]
  },

  // å¤´éƒ¨é…ç½®
  async headers() {
    return [
      {
        source: '/(.*)',
        headers: [
          {
            key: 'X-Frame-Options',
            value: 'DENY',
          },
          {
            key: 'X-Content-Type-Options',
            value: 'nosniff',
          },
        ],
      },
    ]
  },
}

export default nextConfig
```

# éƒ¨ç½²éªŒè¯è„šæœ¬

```js
const https = require('https')
const { createClient } = require('@supabase/supabase-js')

const DOMAIN = process.env.NEXTAUTH_URL || 'https://your-domain.com'

async function verifyDeployment() {
  const checks = {
    domain: false,
    ssl: false,
    api: false,
    database: false,
  }

  try {
    // æ£€æŸ¥åŸŸåè®¿é—®
    const response = await fetch(DOMAIN)
    checks.domain = response.ok

    // æ£€æŸ¥SSLè¯ä¹¦
    checks.ssl = DOMAIN.startsWith('https://')

    // æ£€æŸ¥APIç«¯ç‚¹
    const apiResponse = await fetch(`${DOMAIN}/api/health`)
    checks.api = apiResponse.ok

    // æ£€æŸ¥æ•°æ®åº“è¿æ¥
    if (process.env.SUPABASE_URL && process.env.SUPABASE_ANON_KEY) {
      const supabase = createClient(
        process.env.SUPABASE_URL,
        process.env.SUPABASE_ANON_KEY
      )
      const { error } = await supabase.from('profiles').select('count').limit(1)
      checks.database = !error
    }

    console.log('ğŸ” éƒ¨ç½²éªŒè¯ç»“æœ:')
    console.log(`åŸŸåè®¿é—®: ${checks.domain ? 'âœ…' : 'âŒ'}`)
    console.log(`SSLè¯ä¹¦: ${checks.ssl ? 'âœ…' : 'âŒ'}`)
    console.log(`APIæœåŠ¡: ${checks.api ? 'âœ…' : 'âŒ'}`)
    console.log(`æ•°æ®åº“: ${checks.database ? 'âœ…' : 'âŒ'}`)

    if (Object.values(checks).every((check) => check)) {
      console.log('\nğŸ‰ éƒ¨ç½²éªŒè¯æˆåŠŸï¼')
    } else {
      console.log('\nâš ï¸  éƒ¨åˆ†åŠŸèƒ½éœ€è¦æ£€æŸ¥')
    }
  } catch (error) {
    console.error('âŒ éªŒè¯è¿‡ç¨‹å‡ºé”™:', error.message)
  }
}

verifyDeployment()
```
